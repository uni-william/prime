<ui:composition template="/WEB-INF/templates/Layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">Aluguel de veículos</ui:define>

	<ui:define name="content">
		<f:metadata>
			<f:viewAction action="#{aluguelBean.inicializar}" />
		</f:metadata>
		<h1 class="aw-page-title">Aluguel de veículos</h1>
		<h:form id="frm">
			<p:focus context="frm" />
			<p:toolbar>
				<p:toolbarGroup>
					<p:commandButton value="Realizar Aluguel"
						action="#{aluguelBean.realizarAluguel}" update="@form" />
				</p:toolbarGroup>
			</p:toolbar>

			<div class="ui-fluid">
				<p:messages id="msg" autoUpdate="false" closable="true" />
				<p:panel header="Dados cliente" id="pncli" style="margin-top:10px">
					<p:panelGrid columns="3" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-5, ui-grid-col-1"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Cliente" for="cliente" />
						<p:autoComplete id="cliente"
							value="#{aluguelBean.aluguel.cliente}"
							completeMethod="#{aluguelBean.completePorNome}" var="cliente"
							itemLabel="#{cliente.nome}" itemValue="#{cliente}"
							dropdown="true" converter="#{aluguelBean.pessoaConverter}"
							forceSelection="true">
							<p:ajax event="itemSelect" process="@this" update="pncli" />
						</p:autoComplete>
						<p:commandButton icon="ui-icon-search" style="width: 30px"
							id="btcliente" title="Carregar cliente cadastrado"
							process="@this" update="@none" ignoreAutoUpdate="true"
							actionListener="#{selecaoClienteBean.abrirSelecaoCliente}">
							<p:ajax event="dialogReturn"
								listener="#{aluguelBean.onClienteEscolhido}" update="@form"
								ignoreAutoUpdate="true" />
						</p:commandButton>
					</p:panelGrid>
					<p:panelGrid columns="4" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-6, ui-grid-col-1, ui-grid-col-3"
						styleClass="panelgrid-noborder" style="margin-top: 10px">
						<p:outputLabel value="CPF/CNPJ" />
						<p:outputLabel
							value="#{aluguelBean.aluguel.cliente.documentoReceita}" />
						<p:outputLabel value="RG" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.rg}" />
						<p:outputLabel value="Endereço" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.logradouro}" />
						<p:outputLabel value="Número" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.numero}" />
						<p:outputLabel value="CEP" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.cep}" />
						<p:outputLabel value="Bairro" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.bairro}" />
						<p:outputLabel value="Cidade" />
						<p:outputLabel value="#{aluguelBean.aluguel.cliente.cidade}" />
						<p:outputLabel value="Estado" />
						<p:outputLabel
							value="#{aluguelBean.aluguel.cliente.estado.descricao}" />
					</p:panelGrid>
				</p:panel>
				<p:panel header="Dados veículo" id="pnveiculo">
					<p:panelGrid columns="3" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-2, ui-grid-col-1"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Placa" for="placa" />
						<p:inputText id="placa" value="#{aluguelBean.placa}">
							<p:ajax event="change"
								listener="#{aluguelBean.pesquisarPorPlaca}" process="@this"
								update="pnveiculo pnaluguel msg" />
						</p:inputText>
						<p:commandButton icon="ui-icon-search" style="width: 30px"
							id="btveiculo" title="Carregar veículo cadastrado"
							process="@this" update="@none" ignoreAutoUpdate="true"
							actionListener="#{selecaoVeiculoAluguelBean.abrirSelecaoVeiculoAluguel}">
							<p:ajax event="dialogReturn"
								listener="#{aluguelBean.onVeiculoEscolhido}" update="@form"
								ignoreAutoUpdate="true" />
						</p:commandButton>
					</p:panelGrid>
					<p:panelGrid columns="6" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-4, ui-grid-col-1, ui-grid-col-2, ui-grid-col-1, ui-grid-col-2"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Modelo" />
						<p:outputLabel
							value="#{aluguelBean.aluguel.veiculo.modelo.modeloMotoriacao}" />
						<p:outputLabel value="Cor" />
						<p:outputLabel value="#{aluguelBean.aluguel.veiculo.cor}" />
						<p:outputLabel value="Chassi" />
						<p:outputLabel value="#{aluguelBean.aluguel.veiculo.chassi}" />
						<p:outputLabel value="Fabricação" />
						<p:outputLabel
							value="#{aluguelBean.aluguel.veiculo.anoFabricacao}" />
						<p:outputLabel value="Ano Modelo" />
						<p:outputLabel value="#{aluguelBean.aluguel.veiculo.anoModelo}" />
					</p:panelGrid>
				</p:panel>
				<p:panel header="Aluguel" id="pnaluguel">
					<p:panelGrid columns="4" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-2, ui-grid-col-1, ui-grid-col-2"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Início" for="dtini" />
						<p:calendar value="#{aluguelBean.aluguel.dataInicio}"
							mask="99/99/9999" pattern="dd/MM/yyyy" id="dtini" showOn="button">
							<p:ajax event="dateSelect"
								listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
							<p:ajax event="change" listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
						</p:calendar>
						<p:outputLabel value="Data final" for="dtprevista" />
						<p:calendar value="#{aluguelBean.aluguel.dataPrevista}"
							mask="99/99/9999" pattern="dd/MM/yyyy" id="dtprevista"
							showOn="button">
							<p:ajax event="dateSelect"
								listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
							<p:ajax event="change" listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
						</p:calendar>
					</p:panelGrid>
					<p:panelGrid columns="4" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-2, ui-grid-col-1, ui-grid-col-2"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Valor Diária" for="vldiaria" />
						<p:outputLabel value="#{aluguelBean.aluguel.diaria}" id="vldiaria">
							<f:convertNumber type="currency" />
						</p:outputLabel>
						<p:outputLabel value="Dias" />
						<p:outputLabel value="#{aluguelBean.dias}"></p:outputLabel>
					</p:panelGrid>
					<p:panelGrid columns="4" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-2, ui-grid-col-1, ui-grid-col-2"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Total" />
						<p:outputLabel value="#{aluguelBean.aluguel.total}"
							style="font-weight: bold">
							<f:convertNumber type="currency" />
						</p:outputLabel>
					</p:panelGrid>

					<p:panelGrid columns="4" layout="grid"
						columnClasses="ui-grid-col-1, ui-grid-col-2, ui-grid-col-1, ui-grid-col-2"
						styleClass="panelgrid-noborder">
						<p:outputLabel value="Desconto" />
						<p:inputNumber id="vldesconto"
							value="#{aluguelBean.aluguel.desconto}" decimalPlaces="2"
							thousandSeparator="." decimalSeparator=",">
							<p:ajax event="change" listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
						</p:inputNumber>
						<p:outputLabel value="Acréscimo" />
						<p:inputNumber id="vlacrescimo"
							value="#{aluguelBean.aluguel.acrescimo}" decimalPlaces="2"
							thousandSeparator="." decimalSeparator=",">
							<p:ajax event="change" listener="#{aluguelBean.calcularTotal}"
								process="dtini dtprevista vldesconto vlacrescimo" update="@form" />
						</p:inputNumber>

					</p:panelGrid>
				</p:panel>
			</div>
		</h:form>
	</ui:define>

</ui:composition>